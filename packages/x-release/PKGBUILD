# Maintainer: Xscriptor <dev@xscriptor.com>
pkgname=x-release
pkgver=1.0
pkgrel=2
pkgdesc="X Linux identity and branding files"
arch=('any')
url="https://dev.xscriptor.com/x"
license=('MIT')
backup=('etc/os-release' 'etc/default/grub')
install=x-release.install

source=('distributor-logo.svg')
md5sums=('SKIP')

package() {
    install -Dm644 "distributor-logo.svg" "$pkgdir/usr/share/pixmaps/x.png"

    install -Dm644 /dev/stdin "$pkgdir/etc/os-release" <<'EOF'
NAME="X"
PRETTY_NAME="X Linux"
ID=x
ID_LIKE=arch
BUILD_ID=rolling
ANSI_COLOR="0;36"
HOME_URL="https://dev.xscriptor.com/x"
LOGO=x
EOF

    install -Dm644 /dev/stdin "$pkgdir/etc/default/grub" <<'EOF'
GRUB_DEFAULT=0
GRUB_TIMEOUT=5
GRUB_DISTRIBUTOR="X"
GRUB_CMDLINE_LINUX_DEFAULT=""
GRUB_CMDLINE_LINUX=""
GRUB_PRELOAD_MODULES="part_gpt part_msdos"
GRUB_TIMEOUT_STYLE=menu
GRUB_TERMINAL_INPUT=console
GRUB_GFXMODE=auto
GRUB_GFXPAYLOAD_LINUX=keep
GRUB_DISABLE_RECOVERY=true
EOF

    install -d "$pkgdir/usr/lib"
    ln -sf /etc/os-release "$pkgdir/usr/lib/os-release"
}